#! /usr/bin/env python3

import sys
from subprocess import Popen
def notify(s: str): 
    Popen(f"notify-send {s}", shell=True)

try:
    from i3ipc import Connection
except ImportError:
    notify("No i3ipc module installed, for app_swipe")

i3 = Connection()
focused_class = i3.get_tree().find_focused().window_class
valid_apps = [
    "Google-chrome",
    "Slack",
    "Org.gnome.Nautilus",
]

if focused_class in valid_apps:
    if len(sys.argv) < 2: 
        notify("You must provide a direction")
        raise ValueError("You must provide a direction")
    direction = sys.argv[1]
    try:
        if direction == "left":
            p = Popen(["xdotool", "key",  "Alt_L+Left"])
        elif direction == "right":
            p = Popen(["xdotool", "key",  "Alt_L+Right"])
        else:
            notify(f"{direction} not understood")
            raise ValueError(f"{direction} not understood")
    except OSError:
        notify("xdotool not installed")
