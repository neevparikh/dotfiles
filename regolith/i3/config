set $mod Mod4
set $alt Mod1

# Xresources
set_from_resource $rofiTheme rofi.theme /etc/regolith/styles/lascaille/rofi.rasi

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
font pango:Meslo LG M DZ 11

# thin borders
hide_edge_borders both

# floating windows
for_window [class="^.*"] border pixel 0
floating_maximum_size -1 x -1
for_window [class="floating_window"] floating enable
for_window [title="gt_floating"] floating enable
for_window [class="Pavucontrol"] floating enable
for_window [class="nm-connection-editor"] floating enable
for_window [class="Blueman-manager"] floating enable
for_window [class="feh"] floating enable
for_window [class="matplotlib"] floating enable
for_window [class="lxappearance"] floating enable
for_window [class="1password"] floating enable
for_window [class="Gnome-screenshot"] floating enable

assign [class="Slack"] 10
assign [class="Zoom"] 10
assign [class="Spotify"] 20
assign [class="discord"] 20
for_window [class="Spotify"] move to workspace 20

default_border pixel 0
default_floating_border pixel 0
gaps inner 5 
gaps outer 0
smart_gaps on
popup_during_fullscreen smart
focus_follows_mouse yes

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

## Launch // Terminal // <> Return ##
bindsym $mod+Return exec terminal 

## Launch // Find // <> o ##
bindsym $mod+o exec rofi -show find -modi find:/usr/share/rofi/modi/finder.sh
## Launch // Command // <> Space ##
bindsym $mod+space exec rofi -show run -theme $rofiTheme 
## Launch // Application // <><Shift> Space ##
bindsym $mod+Shift+space exec rofi -show drun -theme $rofiTheme 
## Launch // Browser // <><Shift> Space ##
bindsym $mod+w exec gtk-launch $(xdg-settings get default-web-browser)
## Launch // Look Selector // <><Alt> l ##
bindsym $mod+$alt+l exec rofi -show look -modi look:/usr/share/rofi/modi/look-selector.sh
## Launch // Toggle Theme // <> ` ##
bindsym $mod+grave exec toggle_theme
## Navigate // Window by Name // <><Ctrl> Space ##
bindsym $mod+Ctrl+space exec rofi -show window -theme $rofiTheme

bindsym $mod+Ctrl+p exec gnome-screenshot -i
bindsym $mod+$alt+space exec setup_commands

# change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# alternatively, you can use the cursor keys:
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# move focused window
bindsym $mod+Shift+h move left 
bindsym $mod+Shift+j move down 
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

# alternatively, you can use the cursor keys:
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# split in horizontal orientation
bindsym $mod+b split h

# split in vertical orientation
bindsym $mod+v split v

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacking
bindsym $mod+t layout tabbed
bindsym $mod+e layout toggle split

# toggle tiling / floating
bindsym $mod+Shift+f floating toggle

# change focus between tiling / floating windows
bindsym $mod+Control+f focus mode_toggle

# focus the parent container
bindsym $mod+a focus parent

# focus the child container
bindsym $mod+d focus child


# workspaces on monitors 

workspace 1 output HDMI-A-1-0 primary DP-1 DP-2 DP-3
workspace 2 output HDMI-A-1-0 primary DP-1 DP-2 DP-3
workspace 3 output HDMI-A-1-0 primary DP-1 DP-2 DP-3
workspace 4 output HDMI-A-1-0 primary DP-1 DP-2 DP-3
workspace 5 output HDMI-A-1-0 primary DP-1 DP-2 DP-3
workspace 6 output HDMI-A-1-0 primary DP-1 DP-2 DP-3
workspace 7 output HDMI-A-1-0 primary DP-1 DP-2 DP-3
workspace 8 output HDMI-A-1-0 primary DP-1 DP-2 DP-3
workspace 9 output HDMI-A-1-0 primary DP-1 DP-2 DP-3
workspace 10 output HDMI-A-1-0 primary DP-1 DP-2 DP-3

workspace 11 output DP-3 DP-1 DP-2 primary HDMI-A-1-0 
workspace 12 output DP-3 DP-1 DP-2 primary HDMI-A-1-0 
workspace 13 output DP-3 DP-1 DP-2 primary HDMI-A-1-0 
workspace 14 output DP-3 DP-1 DP-2 primary HDMI-A-1-0 
workspace 15 output DP-3 DP-1 DP-2 primary HDMI-A-1-0 
workspace 16 output DP-3 DP-1 DP-2 primary HDMI-A-1-0 
workspace 17 output DP-3 DP-1 DP-2 primary HDMI-A-1-0 
workspace 18 output DP-3 DP-1 DP-2 primary HDMI-A-1-0 
workspace 19 output DP-3 DP-1 DP-2 primary HDMI-A-1-0 
workspace 20 output DP-3 DP-1 DP-2 primary HDMI-A-1-0 

# switch to workspace

bindsym $mod+1 workspace 1
bindsym $mod+2 workspace 2
bindsym $mod+3 workspace 3
bindsym $mod+4 workspace 4
bindsym $mod+5 workspace 5
bindsym $mod+6 workspace 6
bindsym $mod+7 workspace 7
bindsym $mod+8 workspace 8
bindsym $mod+9 workspace 9
bindsym $mod+0 workspace 10

bindsym $alt+1 workspace 11
bindsym $alt+2 workspace 12
bindsym $alt+3 workspace 13
bindsym $alt+4 workspace 14
bindsym $alt+5 workspace 15
bindsym $alt+6 workspace 16
bindsym $alt+7 workspace 17
bindsym $alt+8 workspace 18
bindsym $alt+9 workspace 19
bindsym $alt+0 workspace 20

bindsym $mod+Shift+less move workspace to output right
bindsym $mod+Shift+greater move workspace to output left
bindsym $mod+Shift+underscore move workspace to output down
bindsym $mod+Shift+plus move workspace to output up

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace 1
bindsym $mod+Shift+2 move container to workspace 2
bindsym $mod+Shift+3 move container to workspace 3
bindsym $mod+Shift+4 move container to workspace 4
bindsym $mod+Shift+5 move container to workspace 5
bindsym $mod+Shift+6 move container to workspace 6
bindsym $mod+Shift+7 move container to workspace 7
bindsym $mod+Shift+8 move container to workspace 8
bindsym $mod+Shift+9 move container to workspace 9
bindsym $mod+Shift+0 move container to workspace 10

bindsym $alt+Shift+1 move container to workspace 11
bindsym $alt+Shift+2 move container to workspace 12
bindsym $alt+Shift+3 move container to workspace 13
bindsym $alt+Shift+4 move container to workspace 14
bindsym $alt+Shift+5 move container to workspace 15
bindsym $alt+Shift+6 move container to workspace 16
bindsym $alt+Shift+7 move container to workspace 17
bindsym $alt+Shift+8 move container to workspace 18
bindsym $alt+Shift+9 move container to workspace 19
bindsym $alt+Shift+0 move container to workspace 20

## Modify // Move Window to Next Free Workspace // <><Shift> ` ##
bindsym $mod+Shift+grave exec --no-startup-id /usr/bin/i3-next-workspace --move-window
#
## Modify // Carry Window to Next Free Workspace // <><Shift> ` ##
bindsym $alt+Shift+grave exec --no-startup-id /usr/bin/i3-next-workspace --move-window-and-follow

bindsym $mod+Tab workspace back_and_forth

## Session // Exit App // <><Shift> q ##
bindsym $mod+Shift+q [con_id="__focused__"] kill

## Session // Reload i3 Config // <><Shift> c ##
set_from_resource $i3-wm.binding.reload i3-wm.binding.reload Shift+c
bindsym $mod+$i3-wm.binding.reload reload

## Session // Refresh Session // <><Ctrl> r ##
bindsym $mod+Ctrl+r exec --no-startup-id /usr/bin/regolith-look refresh

## Session // Restart i3 // <><Shift> r ##
bindsym $mod+Shift+r restart

## Session // Logout // <><Shift> e ##
bindsym $mod+Shift+e exec /usr/bin/gnome-session-quit --logout

## Session // Reboot // <><Shift> b ##
bindsym $mod+Shift+b exec /usr/bin/gnome-session-quit --reboot

## Session // Power Down // <><Shift> p ##
bindsym $mod+Shift+p exec /usr/bin/gnome-session-quit --power-off

## Session // Lock Screen // <> Escape ##
bindsym $mod+Escape exec i3-wm.program.lock dbus-send --type=method_call --dest=org.gnome.ScreenSaver /org/gnome/ScreenSaver org.gnome.ScreenSaver.Lock

## Session // Sleep // <><Shift> s ##
bindsym $mod+Shift+s exec systemctl suspend

## Modify // Settings // <> c ##
bindsym $mod+c exec gnome-control-center --class=floating_window

## Launch // File Browser // <><Shift> n ##
bindsym $mod+n exec /usr/bin/nautilus --new-window

# i3-snapshot for load/save current layout
## Modify // Save Window Layout // <> , ##
bindsym $mod+comma  exec /usr/bin/i3-snapshot -o > /tmp/i3-snapshot

## Modify // Load Window Layout // <> . ##
bindsym $mod+period exec /usr/bin/i3-snapshot -c < /tmp/i3-snapshot

bindsym $mod+p exec pavucontrol


# resize window (you can also use the mouse for that)
mode "resize" {
        # These bindings trigger as soon as you enter the resize mode

        # Pressing left will shrink the window’s width.
        # Pressing right will grow the window’s width.
        # Pressing up will shrink the window’s height.
        # Pressing down will grow the window’s height.
        bindsym h resize shrink width 5 px or 5 ppt
        bindsym j resize grow height 5 px or 5 ppt
        bindsym k resize shrink height 5 px or 5 ppt
        bindsym l resize grow width 5 px or 5 ppt

        # same bindings, but for the arrow keys
        bindsym Left resize shrink width 1 px or 1 ppt
        bindsym Down resize grow height 1 px or 1 ppt
        bindsym Up resize shrink height 1 px or 1 ppt
        bindsym Right resize grow width 1 px or 1 ppt
        
        ## Resize // Window Gaps // + - ##
        bindsym minus gaps inner current minus 6
        bindsym plus gaps inner current plus 6
        bindsym Shift+minus gaps inner current minus 12
        bindsym Shift+plus gaps inner current plus 12

        # back to normal: Enter or Escape or $mod+r
        bindsym Return mode "default"
        bindsym Escape mode "default"
        bindsym $mod+r mode "default"
}


bindsym $mod+r mode "resize"

# Create variables from Xresources for i3's look.
set_from_resource $focused.color.border i3-wm.client.focused.color.border "#002b36"
set_from_resource $focused.color.background i3-wm.client.focused.color.background "#586e75"
set_from_resource $focused.color.text i3-wm.client.focused.color.text "#fdf6e3"
set_from_resource $focused.color.indicator i3-wm.client.focused.color.indicator "#268bd2"
set_from_resource $focused.color.child_border i3-wm.client.focused.color.child_border

set_from_resource $focused_inactive.color.border i3-wm.client.focused_inactive.color.border "#002b36"
set_from_resource $focused_inactive.color.background i3-wm.client.focused_inactive.color.background "#073642"
set_from_resource $focused_inactive.color.text i3-wm.client.focused_inactive.color.text "#839496"
set_from_resource $focused_inactive.color.indicator i3-wm.client.focused_inactive.color.indicator "#073642"
set_from_resource $focused_inactive.color.child_border i3-wm.client.focused_inactive.color.child_border

set_from_resource $unfocused.color.border i3-wm.client.unfocused.color.border "#002b36"
set_from_resource $unfocused.color.background i3-wm.client.unfocused.color.background "#073642"
set_from_resource $unfocused.color.text i3-wm.client.unfocused.color.text "#839496"
set_from_resource $unfocused.color.indicator i3-wm.client.unfocused.color.indicator "#073642"
set_from_resource $unfocused.color.child_border i3-wm.client.unfocused.color.child_border

set_from_resource $urgent.color.border i3-wm.client.urgent.color.border "#002b36"
set_from_resource $urgent.color.background i3-wm.client.urgent.color.background "#dc322f"
set_from_resource $urgent.color.text i3-wm.client.urgent.color.text "#fdf6e3"
set_from_resource $urgent.color.indicator i3-wm.client.urgent.color.indicator "#002b36"
set_from_resource $urgent.color.child_border i3-wm.client.urgent.color.child_border


# Window Border color
# class                 border                             background                         text                               indicator                          child_border
client.focused          $focused.color.border              $focused.color.background          $focused.color.text                $focused.color.indicator           $focused.color.child_border
client.focused_inactive $focused_inactive.color.border     $focused_inactive.color.background $focused_inactive.color.text       $focused_inactive.color.indicator  $focused_inactive.color.child_border
client.unfocused        $unfocused.color.border            $unfocused.color.background        $unfocused.color.text              $unfocused.color.indicator         $unfocused.color.child_border
client.urgent           $urgent.color.border               $urgent.color.background           $urgent.color.text                 $urgent.color.indicator            $urgent.color.child_border

# Create variables from Xresources for i3bars's look.
set_from_resource $i3-wm.bar.background.color i3-wm.bar.background.color "#002b36"
set_from_resource $i3-wm.bar.statusline.color i3-wm.bar.statusline.color "#93a1a1"
set_from_resource $i3-wm.bar.separator.color i3-wm.bar.separator.color "#268bd2"

set_from_resource $i3-wm.bar.workspace.focused.border.color i3-wm.bar.workspace.focused.border.color "#073642"
set_from_resource $i3-wm.bar.workspace.focused.background.color i3-wm.bar.workspace.focused.background.color "#073642"
set_from_resource $i3-wm.bar.workspace.focused.text.color i3-wm.bar.workspace.focused.text.color "#eee8d5"

set_from_resource $i3-wm.bar.workspace.active.border.color i3-wm.bar.workspace.active.border.color "#073642"
set_from_resource $i3-wm.bar.workspace.active.background.color i3-wm.bar.workspace.active.background.color "#073642"
set_from_resource $i3-wm.bar.workspace.active.text.color i3-wm.bar.workspace.active.text.color "#586e75"

set_from_resource $i3-wm.bar.workspace.inactive.border.color i3-wm.bar.workspace.inactive.border.color "#002b36"
set_from_resource $i3-wm.bar.workspace.inactive.background.color i3-wm.bar.workspace.inactive.background.color "#002b36"
set_from_resource $i3-wm.bar.workspace.inactive.text.color i3-wm.bar.workspace.inactive.text.color "#586e75"

set_from_resource $i3-wm.bar.workspace.urgent.border.color i3-wm.bar.workspace.urgent.border.color "#dc322f"
set_from_resource $i3-wm.bar.workspace.urgent.background.color i3-wm.bar.workspace.urgent.background.color "#dc322f"
set_from_resource $i3-wm.bar.workspace.urgent.text.color i3-wm.bar.workspace.urgent.text.color "#fdf6e3"

# Sets i3 font for dialogs
font Meslo LG M DZ 11
#
###############################################################################
# i3 Bar
###############################################################################

# i3xrocks config file. Override this for a custom status bar generator.
set_from_resource $i3-wm.bar.status_command i3-wm.bar.status_command i3xrocks -u ~/.config/regolith/i3xrocks/conf.d -d /etc/regolith/i3xrocks/conf.d

# The bar configuration
# bar {
#   position top
#   mode dock
#   font pango:Meslo LG M DZ 11, Material Design Icons 11  
#   separator_symbol "|"
#   status_command $i3-wm.bar.status_command
#   tray_output primary
#   strip_workspace_numbers yes

#   colors {
#       background $i3-wm.bar.background.color
#       statusline $i3-wm.bar.statusline.color
#       separator  $i3-wm.bar.separator.color

# #                        BORDER  BACKGROUND TEXT
#       focused_workspace  $i3-wm.bar.workspace.focused.border.color      $i3-wm.bar.workspace.focused.background.color   $i3-wm.bar.workspace.focused.text.color
#       active_workspace   $i3-wm.bar.workspace.active.border.color       $i3-wm.bar.workspace.active.background.color    $i3-wm.bar.workspace.active.text.color
#       inactive_workspace $i3-wm.bar.workspace.inactive.border.color     $i3-wm.bar.workspace.inactive.background.color  $i3-wm.bar.workspace.inactive.text.color
#       urgent_workspace   $i3-wm.bar.workspace.urgent.border.color       $i3-wm.bar.workspace.urgent.background.color    $i3-wm.bar.workspace.urgent.text.color
#   }
# }

# bindsym XF86Launch1 exec 
# bindsym XF86Launch3 exec 
# bindsym XF86Launch4 exec

exec_always --no-startup-id polybar-launch

bindsym XF86TouchpadToggle exec ~/.local/bin/toggle-touchpad

# Start the installed regolith-compositor
exec_always --no-startup-id /usr/share/regolith-compositor/init

# Start Dunst for notifications
exec --no-startup-id /usr/bin/dunst

# Load nm-applet to provide auth dialogs for network access
exec --no-startup-id nm-applet

exec --no-startup-id setup_commands
